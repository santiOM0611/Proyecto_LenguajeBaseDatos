<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/plantilla :: head}">
    <title>Listado de Check</title>        
</head>
<body>
<header th:replace="~{layout/plantilla :: header}"/>

<div class="container mt-4">
    <h2 class="mb-4">Listado de Check</h2>
    
    <div th:if="${mensaje}" th:class="'alert alert-' + ${tipo} + ' alert-dismissible fade show'" role="alert">
        <span th:text="${mensaje}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    
    <div class="d-flex justify-content-between mb-3">
        <a class="btn btn-primary" th:href="@{/check/agregar}">
            <i class="fas fa-plus"></i> Agregar Check
        </a>
        <a class="btn btn-secondary" th:href="@{/check/buscarID}">
            <i class="fas fa-search"></i> Buscar por ID
        </a>
    </div>

    <div class="table-responsive">
        <table class="table table-hover table-striped">
            <thead class="table-dark">
                <tr>
                    <th>ID Check</th>
                    <th>ID Reserva</th>
                    <th>Fecha Entrada</th>
                    <th>Hora Entrada</th>
                    <th>Fecha Salida</th>
                    <th>Hora Salida</th>
                    <th>Devolución</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="check : ${checks}">
                    <td th:text="${check.idCheck}">1</td>
                    <td th:text="${check.idReserva}">100</td>
                    <td th:text="${check.fechaEntrada != null ? #temporals.format(check.fechaEntrada, 'dd/MM/yyyy') : 'N/A'}">01/01/2025</td>
                    <td th:text="${check.horaEntrada != null ? #temporals.format(check.horaEntrada, 'HH:mm') : 'N/A'}">14:00</td>
                    <td th:text="${check.fechaSalida != null ? #temporals.format(check.fechaSalida, 'dd/MM/yyyy') : 'Pendiente'}">05/01/2025</td>
                    <td th:text="${check.horaSalida != null ? #temporals.format(check.horaSalida, 'HH:mm') : 'Pendiente'}">12:00</td>
                    <td>
                        <span th:if="${check.devolucion != null}" class="badge bg-info" th:text="${check.devolucion}">Llaves entregadas</span>
                        <span th:if="${check.devolucion == null}" class="text-muted">-</span>
                    </td>
                    <td>
                        <a th:href="@{'/check/ver/' + ${check.idCheck}}" class="btn btn-info btn-sm">
                            <i class="fas fa-eye"></i> Ver
                        </a>
                        <a th:href="@{'/check/editar/' + ${check.idCheck}}" class="btn btn-warning btn-sm">
                            <i class="fas fa-edit"></i> Editar
                        </a>
                        <a th:href="@{'/check/eliminar/' + ${check.idCheck}}" class="btn btn-danger btn-sm"
                           onclick="return confirm('¿Está seguro de eliminar este check?')">
                            <i class="fas fa-trash"></i> Eliminar
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
        
        <div class="text-center p-4" th:if="${checks == null or checks.empty}">
            <span>No hay registros de check</span>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<footer th:replace="~{layout/plantilla :: footer}"/>
</body>
</html>